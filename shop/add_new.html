<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Add New Product</title>
</head>
<body>
    <h1>Add New Product</h1>

    <!-- Toggle for Simple Product vs Variations -->
    <label>
        <input type="checkbox" id="variationsToggle" onchange="toggleVariations()">
        Variations (unchecked = Simple Product)
    </label>

    <form id="addProductForm" action="/shop/add_new" method="POST" enctype="multipart/form-data">
        <!-- Products Section -->
        <section>
            <h2>Product Details</h2>
            <label>ID: <input type="text" name="id" readonly value="Auto-assigned"></label><br>
            <label>Name: <input type="text" name="name" required></label><br>
            <label>Price: <input type="number" name="price" step="0.01" required></label><br>
            <label>Available Quantity: <input type="number" name="available_qty" min="0"></label><br>
            <input type="hidden" name="vendor_id" value="CURRENT_USER_ID"> <!-- Replace with actual user ID -->
            <label>Primary Category:
                <select name="category_id" required>
                    <option value="1">Uncategorized</option>
                    <!-- Add more options dynamically via server-side logic -->
                </select>
            </label><br>
            <label>Description: <textarea name="description" required></textarea></label><br>
            <label>SKU: <input type="text" name="sku" required></label><br>
            <label>Status:
                <select name="status">
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                    <option value="out_of_stock">Out of Stock</option>
                </select>
            </label><br>
            <label>Width: <input type="number" name="width" step="0.01"></label><br>
            <label>Height: <input type="number" name="height" step="0.01"></label><br>
            <label>Depth: <input type="number" name="depth" step="0.01"></label><br>
            <label>Weight: <input type="number" name="weight" step="0.01"></label><br>
            <label>Dimension Unit:
                <select name="dimension_unit">
                    <option value="">Select</option>
                    <option value="in">Inches</option>
                    <option value="cm">Centimeters</option>
                </select>
            </label><br>
            <label>Weight Unit:
                <select name="weight_unit">
                    <option value="">Select</option>
                    <option value="lbs">Pounds</option>
                    <option value="kg">Kilograms</option>
                </select>
            </label><br>
            <input type="hidden" name="created_by" value="CURRENT_USER_ID"> <!-- Replace with actual user ID -->
        </section>

        <!-- Product Categories Section -->
        <section id="secondaryCategories" style="display: none;">
            <h2>Secondary Categories</h2>
            <label><input type="checkbox" name="secondary_categories[]" value="1"> Uncategorized</label><br>
            <!-- Add more checkboxes dynamically -->
        </section>

        <!-- Product Shipping Section -->
        <section id="shippingSection" style="display: none;">
            <h2>Shipping Details</h2>
            <!-- Package 1 -->
            <div>
                <h3>Package 1</h3>
                <label>Length: <input type="number" name="shipping[1][length]" step="0.01"></label><br>
                <label>Width: <input type="number" name="shipping[1][width]" step="0.01"></label><br>
                <label>Height: <input type="number" name="shipping[1][height]" step="0.01"></label><br>
                <label>Weight: <input type="number" name="shipping[1][weight]" step="0.01"></label><br>
                <label>Dimension Unit:
                    <select name="shipping[1][dimension_unit]">
                        <option value="">Select</option>
                        <option value="in">Inches</option>
                        <option value="cm">Centimeters</option>
                    </select>
                </label><br>
                <label>Weight Unit:
                    <select name="shipping[1][weight_unit]">
                        <option value="">Select</option>
                        <option value="lbs">Pounds</option>
                        <option value="kg">Kilograms</option>
                    </select>
                </label><br>
            </div>
            <!-- Package 2 (example, repeat for 3 and 4 if needed) -->
            <div>
                <h3>Package 2</h3>
                <label>Length: <input type="number" name="shipping[2][length]" step="0.01"></label><br>
                <!-- Repeat other fields as above -->
            </div>
        </section>

        <!-- Product Images Section -->
        <section id="imagesSection" style="display: none;">
            <h2>Product Images</h2>
            <!-- Image 1 -->
            <div>
                <h3>Image 1</h3>
                <label>File: <input type="file" name="images[1][file]" required></label><br>
                <label>Friendly Name: <input type="text" name="images[1][friendly_name]"></label><br>
                <label>Primary: <input type="checkbox" name="images[1][is_primary]"></label><br>
                <label>Alt Text: <input type="text" name="images[1][alt_text]"></label><br>
                <label>Order: <input type="number" name="images[1][order]"></label><br>
            </div>
            <!-- Image 2 (example) -->
            <div>
                <h3>Image 2</h3>
                <label>File: <input type="file" name="images[2][file]"></label><br>
                <!-- Repeat other fields -->
            </div>
        </section>

        <!-- Sales Section -->
        <section id="salesSection" style="display: none;">
            <h2>Sale Details</h2>
            <label>Sale Price: <input type="number" name="sale_price" step="0.01"></label><br>
            <label>Start Date: <input type="datetime-local" name="start_date"></label><br>
            <label>End Date: <input type="datetime-local" name="end_date"></label><br>
        </section>

        <!-- Buttons -->
        <button type="submit">Create Product</button>
        <button type="button" onclick="document.getElementById('addProductForm').reset();">Clear Form</button>
    </form>

    <!-- Popup -->
    <div id="successPopup" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border: 1px solid black;">
        <p>New item successfully created</p>
        <button onclick="document.getElementById('successPopup').style.display = 'none';">OK</button>
    </div>

    <script>
        function toggleVariations() {
            const isVariations = document.getElementById('variationsToggle').checked;
            document.getElementById('secondaryCategories').style.display = isVariations ? 'block' : 'none';
            document.getElementById('shippingSection').style.display = isVariations ? 'block' : 'none';
            document.getElementById('imagesSection').style.display = isVariations ? 'block' : 'none';
            document.getElementById('salesSection').style.display = isVariations ? 'block' : 'none';
        }

        document.getElementById('addProductForm').onsubmit = function(event) {
            event.preventDefault(); // Prevent actual submit for now
            this.reset(); // Clear form
            document.getElementById('successPopup').style.display = 'block'; // Show popup
            // Actual submit logic will go here with server-side handling
        };
    </script>
</body>
</html>
